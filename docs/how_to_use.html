<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="methods" href="methods.html" /><link rel="prev" title="Welcome to pyNA’s documentation!" href="index.html" />

    <meta name="generator" content="sphinx-3.1.1, furo 2020.12.30.beta24"/>
        <title>how to use pyNA? - pyNA 1.0.0 documentation</title>
      <link rel="stylesheet" href="_static/styles/furo.css?digest=33d2fc4f3f180ec1ffc6524e273e21d7d58cbe49">
    <link rel="stylesheet" href="_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" href="_static/styles/furo-extensions.css?digest=26485485040e7aaf717c13fd0188a5ad2c2deb60">
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script defer="defer" src="_static/jquery.js"></script>
    <script defer="defer" src="_static/underscore.js"></script>
    <script defer="defer" src="_static/doctools.js"></script>
    <script defer="defer" src="_static/language_data.js"></script>
    <script async="async" defer="defer" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script defer src="_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">pyNA 1.0.0 documentation</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">pyNA 1.0.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption"><span class="caption-text">Main</span></p>
<ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">how to use pyNA?</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods.html">methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="openmdao.html">openmdao</a></li>
<li class="toctree-l1"><a class="reference internal" href="partials.html">partials</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="example_noise_time_series.html">Computing a noise time series</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_noise_contours.html">Computing noise contours</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_noise_epnl_table.html">Computing a noise EPNL table</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_noise_source_distribution.html">Computing noise source distributions</a></li>
</ul>
<p class="caption"><span class="caption-text">pyNA</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="aircraft.html">aircraft</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">data</a></li>
<li class="toctree-l1"><a class="reference internal" href="emissions.html">emissions</a></li>
<li class="toctree-l1"><a class="reference internal" href="engine.html">engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="noise.html">noise</a></li>
<li class="toctree-l1"><a class="reference internal" href="settings.html">settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="trajectory.html">trajectory</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyNA.html">pyna</a></li>
</ul>
<p class="caption"><span class="caption-text">Noise</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="airframe.html">airframe</a></li>
<li class="toctree-l1"><a class="reference internal" href="core.html">core</a></li>
<li class="toctree-l1"><a class="reference internal" href="epnl.html">epnl</a></li>
<li class="toctree-l1"><a class="reference internal" href="fan.html">fan</a></li>
<li class="toctree-l1"><a class="reference internal" href="geometry.html">geometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="ground_reflections.html">ground reflections</a></li>
<li class="toctree-l1"><a class="reference internal" href="ioaspl.html">ioaspl</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipnlt.html">ipnlt</a></li>
<li class="toctree-l1"><a class="reference internal" href="jet.html">jet</a></li>
<li class="toctree-l1"><a class="reference internal" href="lateral_attenuation.html">lateral attenuation</a></li>
<li class="toctree-l1"><a class="reference internal" href="levels_int.html">levels_int</a></li>
<li class="toctree-l1"><a class="reference internal" href="levels.html">levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="noise.html">noise</a></li>
<li class="toctree-l1"><a class="reference internal" href="noise_model.html">noise_model</a></li>
<li class="toctree-l1"><a class="reference internal" href="normalization_engine_variables.html">normalization_engine_variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="oaspl.html">oaspl</a></li>
<li class="toctree-l1"><a class="reference internal" href="pnlt.html">pnlt</a></li>
<li class="toctree-l1"><a class="reference internal" href="propagation.html">propagation</a></li>
<li class="toctree-l1"><a class="reference internal" href="shielding.html">shielding</a></li>
<li class="toctree-l1"><a class="reference internal" href="source.html">source</a></li>
<li class="toctree-l1"><a class="reference internal" href="spl.html">spl</a></li>
<li class="toctree-l1"><a class="reference internal" href="split_subbands.html">split subbands</a></li>
</ul>
<p class="caption"><span class="caption-text">Trajectory</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="aerodynamics.html">aerodynamics</a></li>
<li class="toctree-l1"><a class="reference internal" href="atmosphere.html">atmosphere</a></li>
<li class="toctree-l1"><a class="reference internal" href="clcd.html">clcd</a></li>
<li class="toctree-l1"><a class="reference internal" href="flight_dynamics.html">flight_dynamics</a></li>
<li class="toctree-l1"><a class="reference internal" href="mux.html">mux</a></li>
<li class="toctree-l1"><a class="reference internal" href="propulsion.html">propulsion</a></li>
<li class="toctree-l1"><a class="reference internal" href="trajectory.html">trajectory</a></li>
<li class="toctree-l1"><a class="reference internal" href="trajectory_ode.html">trajectory_ode</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="how-to-use-pyna">
<span id="how-to-use"></span><h1>how to use pyNA?<a class="headerlink" href="#how-to-use-pyna" title="Permalink to this headline">¶</a></h1>
<div class="section" id="settings-dictionary">
<h2>Settings dictionary<a class="headerlink" href="#settings-dictionary" title="Permalink to this headline">¶</a></h2>
<p>The operation of pyNA is controlled using the <code class="docutils literal notranslate"><span class="pre">settings</span></code> class. An example of a settings dictionary can be found <a class="reference internal" href="settings.html#settings"><span class="std std-ref">here</span></a>.</p>
</div>
<div class="section" id="case-folder-structure">
<h2>Case folder structure<a class="headerlink" href="#case-folder-structure" title="Permalink to this headline">¶</a></h2>
<p>pyNA uses a specific folder structure for each analysis: all files related to the case named <code class="docutils literal notranslate"><span class="pre">settings['case_name']</span></code> are saved in a directory organized as follows:</p>
<a class="reference internal image-reference" href="_images/folder_structure.jpg"><img alt="_images/folder_structure.jpg" src="_images/folder_structure.jpg" style="width: 400px;"/></a>
<p>The <em>aircraft</em> subfolder contains all aircraft parameters (<code class="docutils literal notranslate"><span class="pre">aircraft.json</span></code>), the raw aircraft aerodynamics data (<code class="docutils literal notranslate"><span class="pre">aerodeck_cl.csv</span></code>, <code class="docutils literal notranslate"><span class="pre">aerodeck_cd.csv</span></code>) and the aerodynamics deck used in the trajectory computations (<code class="docutils literal notranslate"><span class="pre">cl_aircraft.npy</span></code>, <code class="docutils literal notranslate"><span class="pre">cd_aircraft.npy</span></code>).
The raw engine deck data used in trajectory computations (<code class="docutils literal notranslate"><span class="pre">engine_deck.csv</span></code>) and engine time series files for a predefined trajectory (<code class="docutils literal notranslate"><span class="pre">engine_timeseries.csv</span></code>) are saved in the <em>engine</em> subfolder.
The <em>output</em> folder contains saved Openmdao models (<code class="docutils literal notranslate"><span class="pre">trajectory.sql</span></code>) and a table with the results of the convergence check (<code class="docutils literal notranslate"><span class="pre">convergence.csv</span></code>). Model N2-diagrams (<code class="docutils literal notranslate"><span class="pre">case_n2.html</span></code>) can also be found here.
A temporary <em>shielding</em> folder is used for a shielding coefficient time series for a predefined trajectory (<code class="docutils literal notranslate"><span class="pre">shielding.csv</span></code>). This folder will be removed once the shielding module is implemented in pyNA.
Finally, the <em>trajectory</em> folder contains trajectory time series (<code class="docutils literal notranslate"><span class="pre">trajectory.csv</span></code>).</p>
</div>
<div class="section" id="pyna-structure">
<span id="model-structure"></span><h2>pyNA structure<a class="headerlink" href="#pyna-structure" title="Permalink to this headline">¶</a></h2>
<p>An example pyna noise model structure is illustrated using the following N2 diagram. More information about the N2 diagram can be found on the <a class="reference external" href="http://openmdao.org/twodocs/versions/latest/features/model_visualization/n2_basics.html#n2-basics">Openmdao</a> website. An interactive version of the N2 diagram of pyNA can be found <a class="reference external" href="_static/n2.html">here</a>.</p>
<a class="reference internal image-reference" href="_images/pyNA_N2.png"><img alt="_images/pyNA_N2.png" src="_images/pyNA_N2.png" style="width: 900px;"/></a>
<p>From the N2diagram, you can see the components in the model, as well as how specific outputs are fed as inputs into different components. If you want to make an N2-diagram of your own model, you can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">openmdao.api</span> <span class="k">as</span> <span class="nn">om</span>
<span class="n">om</span><span class="o">.</span><span class="n">n2</span><span class="p">(</span><span class="n">py</span><span class="o">.</span><span class="n">problem</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="choosing-a-programming-language">
<h2>Choosing a programming language<a class="headerlink" href="#choosing-a-programming-language" title="Permalink to this headline">¶</a></h2>
<p>The noise modules in pyNA are developed in two programming languages: python and julia. The default language is python. When doing trajectory optimizations, pyNA makes use of the Julia ForwardDiff module to compute acoustic objective function sensitivities. You can choose which language to use by setting a python environment variable to <code class="docutils literal notranslate"><span class="pre">'python'</span></code> or <code class="docutils literal notranslate"><span class="pre">'julia'</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">'pyna_language'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'julia'</span>
</pre></div>
</div>
</div>
<div class="section" id="initializating-and-running-a-pyna-model">
<h2>Initializating and running a pyNA model<a class="headerlink" href="#initializating-and-running-a-pyna-model" title="Permalink to this headline">¶</a></h2>
<p>To start up pyNA, load the <code class="docutils literal notranslate"><span class="pre">pyna_settings</span></code> class and initialize the model:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyNA</span> <span class="kn">import</span> <span class="n">pyna</span>
<span class="n">py</span> <span class="o">=</span> <span class="n">pyna</span><span class="p">(</span><span class="n">pyna_settings</span><span class="p">)</span>
<span class="n">pyna_settings</span> <span class="o">=</span> <span class="n">pyna</span><span class="o">.</span><span class="n">load_settings</span><span class="p">(</span><span class="n">case_name</span><span class="o">=</span><span class="s1">'stca'</span><span class="p">)</span>
</pre></div>
</div>
<p>After the model is initialized, you can run the following compute functions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">py</span><span class="o">.</span><span class="n">compute_trajectory</span><span class="p">()</span>
<span class="n">py</span><span class="o">.</span><span class="n">compute_noise_timeseries</span><span class="p">()</span>
<span class="n">py</span><span class="o">.</span><span class="n">compute_noise_source_distribution</span><span class="p">()</span>
<span class="n">py</span><span class="o">.</span><span class="n">compute_noise_epnl_table</span><span class="p">()</span>
<span class="n">py</span><span class="o">.</span><span class="n">compute_noise_contours</span><span class="p">()</span>
<span class="n">py</span><span class="o">.</span><span class="n">compute_trajectory_noise</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="save-and-load-results-from-a-file">
<h2>Save and load results from a file<a class="headerlink" href="#save-and-load-results-from-a-file" title="Permalink to this headline">¶</a></h2>
<p>The OpenMDAO models can be saved by setting <code class="docutils literal notranslate"><span class="pre">settings['save_results']</span> <span class="pre">=</span> <span class="pre">True</span></code>. Results can be read from the recorded output file using the <code class="docutils literal notranslate"><span class="pre">pyna.load_results(self,</span> <span class="pre">filename,</span> <span class="pre">casename)</span></code> function. Specify the file name in the output folder of the <code class="docutils literal notranslate"><span class="pre">settings["case_directory"]</span></code> directory using <em>filename</em> and specify the case reader casename. To view the names of the cases in an OpenMDAO case recorder, use <code class="docutils literal notranslate"><span class="pre">case.list_cases()</span></code>. Finally, To save a time series .csv file from an OpenMDAO model, use <code class="docutils literal notranslate"><span class="pre">pyna.save_timeseries</span></code> command.</p>
</div>
<div class="section" id="further-support">
<h2>Further support<a class="headerlink" href="#further-support" title="Permalink to this headline">¶</a></h2>
<p>For more support, just send me an email at <a class="reference external" href="mailto:lvoet%40mit.edu?subject=pyNA support: &lt;topic&gt;&amp;body=Hi,%0d%0a%0d%0aI like more information about ... %0d%0a%0d%0a Github link to code line/block: %0d%0a%0d%0aThanks!">lvoet<span>@</span>mit<span>.</span>edu</a>.</p><p>If you have any comments or feedback for the pyNA tema, feel free to file a <a class="reference external" href="https://github.com/MIT-LAE/pyNA/issues/new">github issue</a> or open a github <a class="reference external" href="https://github.com/MIT-LAE/pyNA/pulls">pull request</a>.</p>
<p>You can also suggest <a class="reference external" href="https://github.com/MIT-LAE/pyNA/projects/new">new projects</a> we can add to pyNA.</p>
<p>We are looking forward to working with you!</p>
</div>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="methods.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">methods</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Home</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, Laurens Voet
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="_sources/how_to_use.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">how to use pyNA?</a><ul>
<li><a class="reference internal" href="#settings-dictionary">Settings dictionary</a></li>
<li><a class="reference internal" href="#case-folder-structure">Case folder structure</a></li>
<li><a class="reference internal" href="#pyna-structure">pyNA structure</a></li>
<li><a class="reference internal" href="#choosing-a-programming-language">Choosing a programming language</a></li>
<li><a class="reference internal" href="#initializating-and-running-a-pyna-model">Initializating and running a pyNA model</a></li>
<li><a class="reference internal" href="#save-and-load-results-from-a-file">Save and load results from a file</a></li>
<li><a class="reference internal" href="#further-support">Further support</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div>
  </body>
</html>